Домашнее задание №4

Срок выполнения - 2 недели

Тема: менеджер задач в телеграм боте

----

В этой задаче мы реализуем простого телеграм-бота по управлению задачами. Немного парсинга, немного моделирования данных, при желании научитесь размещать своих ботов в телеграме.

Похоже на игру, просто интерфейс чуть-чуть другой. Проще чем игра, так как не такая мудреная логика.

Задание относительно простое, сильно голову ломать не придётся! Объем кода 300-400 строк, по времени делается часов за 5.

Управление происходит через текстовый интерфейс:

* `/tasks`
* `/new XXX YYY ZZZ` - создаёт новую задачу
* `/assign_$ID` - делает пользователя исполнителем задачи
* `/unassign_$ID` - снимает задачу с текущего исполнителя
* `/resolve_$ID` - выполняет задачу, удаляет её из списка
* `/my` - показывает задачи, которые назначены на меня
* `/owner` - показывает задачи, которые были созданы мной
  Подробности форматирования смотрите в тестах.

В задании мы используем чуть-чуть подправленную библиотеку (надо делать import "github.com/skinass/telegram-bot-api/v5") для работы с телеграм-ботом, чтобы можно было написать тесты, притворившись сервером телеграма.

После прохождения тестов задачу можно попробовать запустить в реальном телеграме. Для этого у вас есть 3 варианта:

1. `serveo` (<https://serveo.net/>) - пробрасывает порт к вам. Хорошо, чтобы показать что-то на демо, для продакшена такое решение не подойдет.
2. **DEPRECATED**: Скорее всего не будет работать из-за Роскомнадзора.
    `ngrok` (<https://ngrok.com/>) - еще один сервис с пробрасыванием порта. После авторизации там будет команда для сохранения токена в конфиге.
3. **DEPRECATED**: Heroku больше не предоставляют бесплатный хостинг и не позволяют регистрироваться пользователям из РФ.
    `heroku` (<https://devcenter.heroku.com/articles/getting-started-with-go>) - они предоставляют бесплатный хостинг для го с поддоменом и сертификатом, который можно подключить к телеграму. Бесплатная версия должна спать 8 часов в сутки, но для тестирования хватает.

Для создания бота в телеграме воспользуйтесь их же ботом `@BotFather`.

Для хранения данных можно обойтись обычным слайсом и не заморачиваться с базой.

Задание можно сдать и без запуска реального бота. Надо лишь, чтобы код проходил тесты.

В помощь:

* Пример телеграм бота в 04_net2/05_bot
* Остановка сервера - <https://gist.github.com/rvasily/be725f0d1125ceb45fb455082d852f43> - понадобится если вы хотите написать сервер который можно туда-сюда запускать-останавливать для разных тестов. Подсказка - там надо будет использовать select. Остановка через контекcт обсуждалась в 02_async/1_async/12_context_cancel/context_cancel.go. Но можете забить - тест пока один.

Кто хочет пройти чуть вперед - может попробовать прикрутить БД (не проверяется в задании).
